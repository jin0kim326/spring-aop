쓰레드로컬 사용시 주의사항

was는 사용이 끝난 스레드를 제거하지않고 보통 쓰레드풀을 통해서 재사용함,

즉 쓰레드A가 ThreadLocal에 사용자A 데이터를 저장하고, 쓰레드 A가 종료된경우 쓰레드풀로 반환대되지만 쓰레드로컬에 데이터는 남아있음.

이상황에서 사용자B가 데이터 조회를 요청했는데, 쓰레드풀에서 (반환되었떤) 쓰레드A가 할당된경우 (다른쓰레드가 할당될수도있지만)

쓰레드 로컬은 쓰레드A 전용 보관소에 있던 사용자A 데이터를 반환함, 즉  사용자B가 사용자A의 데이터를 조회하게되는 문제 발생!

